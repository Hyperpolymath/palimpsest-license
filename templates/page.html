{% extends "base.html" %}

{% block title %}{{ page.title }} | {{ config.title }}{% endblock %}

{% block description %}{% if page.description %}{{ page.description }}{% else %}{{ page.summary | striptags | truncate(length=160) }}{% endif %}{% endblock %}

{% block og_title %}{{ page.title }}{% endblock %}
{% block og_url %}{{ page.permalink }}{% endblock %}

{% block content %}
<article class="page">
    <header class="page-header">
        <h1>{{ page.title }}</h1>
        {% if page.description %}
        <p class="page-description">{{ page.description }}</p>
        {% endif %}
        {% if page.date %}
        <time datetime="{{ page.date }}" class="page-date">{{ page.date | date(format="%B %d, %Y") }}</time>
        {% endif %}
        {% if page.taxonomies.tags %}
        <ul class="page-tags">
            {% for tag in page.taxonomies.tags %}
            <li><a href="/tags/{{ tag | slugify }}/">{{ tag }}</a></li>
            {% endfor %}
        </ul>
        {% endif %}
    </header>

    <div class="page-content">
        {{ page.content | safe }}
    </div>

    {% if page.toc %}
    <nav class="page-toc">
        <h2>Table of Contents</h2>
        <ul>
            {% for h1 in page.toc %}
            <li>
                <a href="{{ h1.permalink }}">{{ h1.title }}</a>
                {% if h1.children %}
                <ul>
                    {% for h2 in h1.children %}
                    <li><a href="{{ h2.permalink }}">{{ h2.title }}</a></li>
                    {% endfor %}
                </ul>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    </nav>
    {% endif %}
</article>
{% endblock %}
